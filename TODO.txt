Importar branch "smendoza" del repo hadoop-extrae (http://vbqvm.pc.ac.upc.edu/redmine/projects/hadoopextrae/repository), té els últims canvis que va fer el sergio.

Mirar el codi que hi ha a minerva-1:/scratch/hdd/yolandab/lightness en diferents arxius comprimits, tindria que ser el mateix que hi ha a la branch anterior.

Incorporar els canvis de la branch "master" del repo hadoop-extrae (fent un rebase o un diff entre branches), ja que conté millores en la reorganització del projecte fetes pel David i el Nico (la branch npoggi ja està integrada a master).

L'objectiu es tenir una màquina Vagrant dins d'un folder d'aquest repo que pugui aixecar un Hadoop ja configurat i llest per executar jobs amb el "extrae" afagant les mètriques.

En el dropbox està la documentació a instrumentation/README_v4.docx 

Projecte amb un Vagrant de referència: https://github.com/servioticy/servioticy-vagrant

Extrae i paraver disponible a: http://www.bsc.es/computer-sciences/performance-tools/downloads


PARAVER (wxparaver)

load traces -> dades (.prv)
load conf .cfg -> vista concreta (amb filtres, etc...)
.pcf -> events, codis d'events i semantiques
.row -> igual que l'anterior pero dels threads


COMPILE
-------
patch -p1 < /home/vagrant/workspace/hadoop-src-changes.patch

sed -i'' 's|<target name="package" depends="compile, jar, javadoc, docs, cn-docs, api-report, examples, tools-jar, jar-test, ant-tasks, package-librecordio"|<target name="package" depends="compile, jar, javadoc, api-report, examples, tools-jar, jar-test, ant-tasks, package-librecordio"|' build.xml

copy file extraewrapper.jar to hadoop/lib/
(sembla que al repo microsoft/hadoopextrae aquest jar esta a la ruta hadoopextrae/extrae/java_wrapper/lib/extraewrapper.jar pero en el nou repo microsoft/instrumentation NO!)

ant package
(the alternative "ant binary" does not copy all files inside build dir, for example /conf)
(the original command found was "ant -Dskip.contrib=true -Dskip.compile-mapred-classes=true package")


RUN
---

echo "localhost" > hadoop-dist-dcarrera/conf/masters && echo "localhost" > hadoop-dist-dcarrera/conf/slaves

Canviar JAVA_HOME de hadoop-dist-dcarrera/conf/hadoop-env.sh a:
export JAVA_HOME=$(readlink -f /usr/bin/java | sed "s:/bin/java::")

sed -i'' 's|<configuration>|<configuration>\n\n<property>\n<name>fs.default.name</name>\n<value>hdfs://localhost:25000</value>\n</property>|' core-site.xml


FALTA RECOMPILAR EL extraewrapper.jar


Ja no cal:
Canviar fs.default.name a localhost i hadoop.tmp.dir de hadoop-dist-dcarrera/conf/core-site.xml

Canviar mapred.job.tracker a localhost de hadoop-dist-dcarrera/conf/mapred-site.xml